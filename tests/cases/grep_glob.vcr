{"_vcr":"header","command":["claude","-p","--output-format","stream-json","--verbose","--input-format","stream-json","--include-partial-messages"]}
> {"type":"user","message":{"role":"user","content":"Find all Rust files containing 'fn main'"}}
< {"type":"system","subtype":"hook_started","hook_id":"49943191-e362-400a-9529-f3b6d0534e71","hook_name":"SessionStart:startup","hook_event":"SessionStart","uuid":"562da8ae-1abc-47a6-a087-ca66b4092403","session_id":"5fea435c-f743-4369-914c-f946f2b85e26"}
< {"type":"system","subtype":"hook_started","hook_id":"97316370-7b52-4298-a025-10634cfd4c15","hook_name":"SessionStart:startup","hook_event":"SessionStart","uuid":"5241dda7-2e1f-4d7a-aa14-0b85a91d28f1","session_id":"5fea435c-f743-4369-914c-f946f2b85e26"}
< {"type":"system","subtype":"hook_response","hook_id":"49943191-e362-400a-9529-f3b6d0534e71","hook_name":"SessionStart:startup","hook_event":"SessionStart","output":"{\"systemMessage\": \"mats: Best practices available. To set up: /mats:best-practices\"}\n","stdout":"{\"systemMessage\": \"mats: Best practices available. To set up: /mats:best-practices\"}\n","stderr":"","exit_code":0,"outcome":"success","uuid":"b34c2bec-cf66-4fbc-ac00-8c56fd220a8c","session_id":"5fea435c-f743-4369-914c-f946f2b85e26"}
< {"type":"system","subtype":"hook_response","hook_id":"97316370-7b52-4298-a025-10634cfd4c15","hook_name":"SessionStart:startup","hook_event":"SessionStart","output":"Token refresh response schema error: [\n  {\n    \"expected\": \"string\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"access_token\"\n    ],\n    \"message\": \"Invalid input: expected string, received undefined\"\n  },\n  {\n    \"expected\": \"string\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"refresh_token\"\n    ],\n    \"message\": \"Invalid input: expected string, received undefined\"\n  },\n  {\n    \"expected\": \"object\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"user\"\n    ],\n    \"message\": \"Invalid input: expected object, received undefined\"\n  }\n]\n{\"systemMessage\":\"hive-mind: To connect: run /hive-mind:setup\"}\n","stdout":"{\"systemMessage\":\"hive-mind: To connect: run /hive-mind:setup\"}\n","stderr":"Token refresh response schema error: [\n  {\n    \"expected\": \"string\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"access_token\"\n    ],\n    \"message\": \"Invalid input: expected string, received undefined\"\n  },\n  {\n    \"expected\": \"string\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"refresh_token\"\n    ],\n    \"message\": \"Invalid input: expected string, received undefined\"\n  },\n  {\n    \"expected\": \"object\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"user\"\n    ],\n    \"message\": \"Invalid input: expected object, received undefined\"\n  }\n]\n","exit_code":0,"outcome":"success","uuid":"5185ff6b-bf05-470b-990c-6bddb2b917fa","session_id":"5fea435c-f743-4369-914c-f946f2b85e26"}
< {"type":"system","subtype":"init","cwd":"/private/var/folders/21/3gpj27c974j5vc436plct78w0000gn/T/coven-vcr-grep_glob","session_id":"5fea435c-f743-4369-914c-f946f2b85e26","tools":["Task","TaskOutput","Bash","Glob","Grep","ExitPlanMode","Read","Edit","Write","NotebookEdit","WebFetch","TodoWrite","WebSearch","TaskStop","AskUserQuestion","Skill","EnterPlanMode","ToolSearch","mcp__plugin_llms-fetch-mcp_llms-fetch__fetch"],"mcp_servers":[{"name":"plugin:llms-fetch-mcp:llms-fetch","status":"connected"}],"model":"claude-opus-4-6","permissionMode":"acceptEdits","slash_commands":["keybindings-help","debug","draft-tweets","mats:best-practices","hive-mind:setup","frontend-design:frontend-design","mats:permissions","mats:fellow-handbook","mats:lit-review","hive-mind:retrieval","compact","context","cost","init","pr-comments","release-notes","review","security-review","insights"],"apiKeySource":"none","claude_code_version":"2.1.34","output_style":"default","agents":["Bash","general-purpose","statusline-setup","Explore","Plan","claude-code-guide","mats:summarizer","hive-mind:retrieval","code-simplifier:code-simplifier"],"skills":["keybindings-help","debug","draft-tweets","hive-mind:setup","frontend-design:frontend-design","mats:permissions","mats:fellow-handbook","mats:lit-review","hive-mind:retrieval"],"plugins":[{"name":"frontend-design","path":"/Users/yoav/.claude/plugins/cache/claude-code-plugins/frontend-design/1.0.0"},{"name":"mats","path":"/Users/yoav/.claude/plugins/cache/alignment-hive/mats/0.2.2"},{"name":"hive-mind","path":"/Users/yoav/.claude/plugins/cache/alignment-hive/hive-mind/0.1.26"},{"name":"code-simplifier","path":"/Users/yoav/.claude/plugins/cache/claude-plugins-official/code-simplifier/1.0.0"},{"name":"llms-fetch-mcp","path":"/Users/yoav/.claude/plugins/cache/alignment-hive/llms-fetch-mcp/0.1.0"}],"uuid":"b69ec2e1-3089-4370-baf7-cb05d13983a8"}
< {"type":"stream_event","event":{"type":"message_start","message":{"model":"claude-opus-4-6","id":"msg_01JVgjux9Nmf5dYsBjLwxTVf","type":"message","role":"assistant","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":4315,"cache_read_input_tokens":16373,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":4315},"output_tokens":27,"service_tier":"standard","inference_geo":"not_available"}}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"db470916-1253-48c5-944c-d6e157a9f948"}
< {"type":"stream_event","event":{"type":"content_block_start","index":0,"content_block":{"type":"tool_use","id":"toolu_016hm4y2YRVUmqbarejNen7u","name":"Grep","input":{}}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"75c6180e-4990-499b-ba57-ede7efb1125d"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":""}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"e09ed640-9bfd-41cc-b9bb-af13632d58ba"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"{\"pattern\""}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"028c3aad-c8e6-47d3-aeef-451707fcb873"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":": \"fn main"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"b8de6322-f4e1-4c07-ac28-0d4ea23e29a5"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"\""}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"a914296b-c6ab-4ea0-a83f-b7ab455ea536"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":", \"gl"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"148e5f15-b81c-4c91-b695-b34a6816bd6c"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"input_json_delta","partial_json":"ob\": \"*.rs\"}"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"afd22449-51cd-4772-8956-147a6ab3c491"}
< {"type":"assistant","message":{"model":"claude-opus-4-6","id":"msg_01JVgjux9Nmf5dYsBjLwxTVf","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_016hm4y2YRVUmqbarejNen7u","name":"Grep","input":{"pattern":"fn main","glob":"*.rs"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":4315,"cache_read_input_tokens":16373,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":4315},"output_tokens":27,"service_tier":"standard","inference_geo":"not_available"},"context_management":null},"parent_tool_use_id":null,"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","uuid":"54a3fc54-d98c-47b6-81a7-b67370eccfb8"}
< {"type":"stream_event","event":{"type":"content_block_stop","index":0},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"859681a5-a91e-482d-8f7e-4ca85a8ecd87"}
< {"type":"stream_event","event":{"type":"message_delta","delta":{"stop_reason":"tool_use","stop_sequence":null},"usage":{"input_tokens":3,"cache_creation_input_tokens":4315,"cache_read_input_tokens":16373,"output_tokens":72},"context_management":{"applied_edits":[]}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"81f1f3d2-107b-4635-8a79-84b079615109"}
< {"type":"stream_event","event":{"type":"message_stop"},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"6bc424a1-780f-405a-8c0e-b409f7b32fc9"}
< {"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_016hm4y2YRVUmqbarejNen7u","type":"tool_result","content":"Found 1 file\nsrc/main.rs"}]},"parent_tool_use_id":null,"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","uuid":"01fca2e2-645f-4b74-998e-67d37234ecdb","tool_use_result":{"mode":"files_with_matches","filenames":["src/main.rs"],"numFiles":1}}
< {"type":"stream_event","event":{"type":"message_start","message":{"model":"claude-opus-4-6","id":"msg_01T2ZpGNs56MEgEt7sr5BymT","type":"message","role":"assistant","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":97,"cache_read_input_tokens":20688,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":97},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"}}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"8af5da2c-3022-4e8b-a43c-6fc7dd07b22e"}
< {"type":"stream_event","event":{"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"67a08ffb-cb72-43d8-b82e-efb3b3635ac4"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"Found"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"bb22e01f-d055-4fc9-b8f8-5c1e22ec9a03"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":" "}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"0ac70203-9ebd-4028-b702-40f69dc025ee"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"1 "}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"1e86d989-6098-4332-a3b4-60c40cc9c525"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"Rust file containing `"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"d44f44c1-813c-4b63-82bd-9c22a53f0d27"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"fn main`:"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"ecbd15d5-2b03-4ccb-a0aa-0f475d9cfae6"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"\n\n-"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"178b9694-7823-4eb9-b14e-e7adccc568aa"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":" `"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"5c6e306b-b4ca-4bb9-a751-81f686d52225"}
< {"type":"stream_event","event":{"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"src/main.rs`"}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"9c7f3c85-9774-46b4-bf05-e6b903e2ea5c"}
< {"type":"assistant","message":{"model":"claude-opus-4-6","id":"msg_01T2ZpGNs56MEgEt7sr5BymT","type":"message","role":"assistant","content":[{"type":"text","text":"Found 1 Rust file containing `fn main`:\n\n- `src/main.rs`"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":97,"cache_read_input_tokens":20688,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":97},"output_tokens":1,"service_tier":"standard","inference_geo":"not_available"},"context_management":null},"parent_tool_use_id":null,"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","uuid":"b902b0e0-8cb4-4fe3-91d8-ad3473787f2e"}
< {"type":"stream_event","event":{"type":"content_block_stop","index":0},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"5d59392b-49b7-4611-82fe-9a7a113fcce7"}
< {"type":"stream_event","event":{"type":"message_delta","delta":{"stop_reason":"end_turn","stop_sequence":null},"usage":{"input_tokens":1,"cache_creation_input_tokens":97,"cache_read_input_tokens":20688,"output_tokens":24},"context_management":{"applied_edits":[]}},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"50e54b98-f571-4ea1-9b48-cc4290c52774"}
< {"type":"stream_event","event":{"type":"message_stop"},"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","parent_tool_use_id":null,"uuid":"494fef2d-4021-45a3-834e-78c635697103"}
< {"type":"result","subtype":"success","is_error":false,"duration_ms":4711,"duration_api_ms":4195,"num_turns":2,"result":"Found 1 Rust file containing `fn main`:\n\n- `src/main.rs`","stop_reason":null,"session_id":"5fea435c-f743-4369-914c-f946f2b85e26","total_cost_usd":0.0485255,"usage":{"input_tokens":4,"cache_creation_input_tokens":4412,"cache_read_input_tokens":37061,"output_tokens":96,"server_tool_use":{"web_search_requests":0,"web_fetch_requests":0},"service_tier":"standard","cache_creation":{"ephemeral_1h_input_tokens":4412,"ephemeral_5m_input_tokens":0}},"modelUsage":{"claude-opus-4-6":{"inputTokens":4,"outputTokens":96,"cacheReadInputTokens":37061,"cacheCreationInputTokens":4412,"webSearchRequests":0,"costUSD":0.0485255,"contextWindow":200000,"maxOutputTokens":32000}},"permission_denials":[],"uuid":"b61f294e-4e27-41c1-a224-421753e5b27b"}
