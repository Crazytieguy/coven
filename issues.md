- Probably want a way to interrupt a session before prompting (requires restarting it with --resume, same as if the session ends organically)
- Investigate claude -p thinking behavior: user reports seeing streaming tokens that look like thinking but never seeing the "Thinking..." indicator — either parsing is wrong or claude -p has a quirk with thinking tokens. Ensure we're calling claude -p correctly and parsing thinking blocks correctly. (see questions/thinking-display.md)
- Add --show-thinking CLI flag to stream thinking text inline in dim italic (see questions/thinking-display.md)
- (unclear if real issue): the VCR replay should fail the test if input isn't being sent correctly to claude
- It seems that our original research on claude -p mid-session stdin might have been wrong: it doesn't seem to actually send the message to the model. This needs to be checked, and if it's not possible to send messages to claude -p mid session we need to re-design the steering approach to interrupt the session and then resume it. We need to be careful not to kill while a tool is executing though, we should probably interrupt right as an assistant message starts. (All of this is just if claude -p in fact ignores stdin mid session). Another hypothesis is that I was using ralph mode before steering messages were functional in ralph mode
- When entering prompt mode there should be some indication, and also it should always happen on a new line (i.e. if there's a tool call or assistant message in progress). When the prompt is sent the text should be cleared so that buffered text can be printed in the correct location, and the prompt text should be reprinted when its sent to claude via stdin (but only after the current streaming message completes, if there is one)
- :N for a tool should also show the result if available
- After :N exits, the input should be cleared and everything should continue as normal. Currently seems to just get stuck in buffering mode
- Theme colors may need further tuning for specific terminal themes (DarkGrey replaced with Attribute::Dim but worth verifying on light backgrounds too)
- Should display the session id every time a new claude session starts, so that it can be easily resumed by the user if needed (may already work — was invisible due to DarkGrey color)
- When tool calls fail, they often don't display the failure reason. Probably there's a field that could be useful for this that we're not showing
