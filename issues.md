- [P0] Add first `coven worker` VCR test case: single worker dispatch → agent → land pipeline. Worker's git operations (worktree::land, worktree::spawn, etc.) are not yet wrapped with vcr.call() — only session spawning is. Will need to wrap those, create test agent definitions and issue files, and iterate until the snapshot looks correct. (plan: plans/worker-vcr-test.md)
- [P0] Post-VCR-overhaul audit and cleanup: the VCR system overhaul touched runner.rs, vcr.rs, ralph.rs, run.rs, and record_vcr.rs extensively. Need a thorough pass to clean up clippy warnings (too_many_lines, too_many_arguments, expect_used, missing_panics_doc), tighten error handling in vcr.rs (expects → Results), and generally bring the code back to a polished state. (plan: plans/post-vcr-overhaul-cleanup.md)
- [P2] worker.rs too_many_arguments clippy warnings: adding `W: Write` + renderer parameter pushed 7 functions from 7 to 8 args. Consider grouping related params into a context struct.
- [P2] Brainstorm alternatives to "approved" for plan status naming. "Approved" is awkward — consider: ready, accepted, go, etc. (plan: plans/plan-status-naming.md)
- [P1] Add snapshot testing for the :N output (plan: plans/snapshot-view-message.md)
- [P1] Subagent rendering issues: incorrect message identifiers (should start from <parent>/1 for each subagent, and should not increment the main-thread message counter). Also parallel agents don't seem to interleave correctly. Make sure to resolve in a test-driven way
- [P0] I think sometimes rendering pauses after a steering message and there's no way to resume it (plan: plans/rendering-pause-after-steering.md)
- [P2] Big issue: support model-driven context forking via claude cli's `--fork-session` flag. Model outputs xml with definitions for some number of sub tasks (just an assistant message), coven parses it to find the sub tasks and creates a forked claude session per sub task using `--fork-session` with a simple follow up message like "you own subtask N" (each child gets the full parent context window — that's the value over native subagents), waits for all subtasks to complete, and then continues the original session, displaying to the model the final assistant message for each subtask. (plan: plans/context-forking.md)
- [P2] Durable conflict logging: conflict files and resolution outcomes are only rendered to the terminal. Consider logging them to a file for post-mortem analysis. (plan: plans/durable-conflict-logging.md)
- [P0] flush_event_buffer mishandles Result and ProcessExit events — Done line shown with pending followups, followup queue order violated, dead-process send on buffered exit (plan: plans/flush-event-buffer-result-handling.md)
- [P2] Create a features / intended behavior reference document so it's clear what each command mode supports (interaction modes, session lifecycle, rendering expectations). Makes it easier to verify whether code reflects intended behavior.
- [P2] We should unwrap <tool_use_error> when rendering
- [P1] A single Ctrl+C Kills coven instead of just interrupting claude (plan: plans/ctrl-c-interrupt.md)
