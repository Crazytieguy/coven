- [P1] Orchestration next steps: core loop, templates, dispatch serialization, worker state, permission mode, conflict resolution, gc, and workflow documentation all implemented. Remaining: CLAUDE.md integration (open design question), end-to-end testing. (plan: plans/orchestration-next-steps.md)
- [P1] Add first `coven worker` VCR test case: single worker dispatch → agent → land pipeline. Worker's git operations (worktree::land, worktree::spawn, etc.) are not yet wrapped with vcr.call() — only session spawning is. Will need to wrap those, create test agent definitions and issue files, and iterate until the snapshot looks correct.
- [P2] worker.rs too_many_arguments clippy warnings: adding `W: Write` + renderer parameter pushed 7 functions from 7 to 8 args. Consider grouping related params into a context struct.
- [P1] Brainstorm alternatives to "approved" for plan status naming. "Approved" is awkward — consider: ready, accepted, go, etc. (plan: plans/plan-status-naming.md)
- [P1] Add snapshot testing for the :N output (plan: plans/snapshot-view-message.md)
- [P1] Subagent rendering issues: incorrect message identifiers (should start from <parent>/1 for each subagent, and should not increment the main-thread message counter). Also parallel agents don't seem to interleave correctly. Make sure to resolve in a test-driven way
- [P0] I think sometimes rendering pauses after a steering message and there's no way to resume it
- [P2] Big issue: support model-driven context forking via claude cli's `--fork-session` flag. Model outputs xml with definitions for some number of sub tasks (just an assistant message), coven parses it to find the sub tasks and creates a forked claude session per sub task using `--fork-session` with a simple follow up message like "you own subtask N" (each child gets the full parent context window — that's the value over native subagents), waits for all subtasks to complete, and then continues the original session, displaying to the model the final assistant message for each subtask. (plan: plans/context-forking.md)
- [P2] Durable conflict logging: conflict files and resolution outcomes are only rendered to the terminal. Consider logging them to a file for post-mortem analysis. (plan: plans/durable-conflict-logging.md)
- [P1] land_or_resolve discards agent work on FastForwardFailed instead of retrying — when another worker advances main between rebase and ff-merge, the current code resets to main and permanently loses the agent's commits instead of retrying the land. (plan: plans/land-retry-on-ff-failure.md)
- [P1] flush_event_buffer mishandles Result and ProcessExit events — Done line shown with pending followups, followup queue order violated, dead-process send on buffered exit (plan: plans/flush-event-buffer-result-handling.md)
- [P1] Create a features / intended behavior reference document so it's clear what each command mode supports (interaction modes, session lifecycle, rendering expectations). Makes it easier to verify whether code reflects intended behavior.
